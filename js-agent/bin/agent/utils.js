"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ensureStoreInConfig = exports.formatReflections = void 0;
const formatReflections = (reflections, extra) => {
    if ((extra === null || extra === void 0 ? void 0 : extra.onlyStyle) && (extra === null || extra === void 0 ? void 0 : extra.onlyContent)) {
        throw new Error("Cannot specify both `onlyStyle` and `onlyContent` as true.");
    }
    const styleString = `The following is a list of style guidelines previously generated by you:
<style-guidelines>
- ${reflections.styleRules.join("\n- ")}
</style-guidelines>`;
    const contentString = `The following is a list of memories/facts you previously generated about the user:
<user-facts>
- ${reflections.content.join("\n- ")}
</user-facts>`;
    if (extra === null || extra === void 0 ? void 0 : extra.onlyStyle) {
        return styleString;
    }
    if (extra === null || extra === void 0 ? void 0 : extra.onlyContent) {
        return contentString;
    }
    return styleString + "\n\n" + contentString;
};
exports.formatReflections = formatReflections;
const ensureStoreInConfig = (config) => {
    if (!config.store) {
        throw new Error("`store` not found in config");
    }
    return config.store;
};
exports.ensureStoreInConfig = ensureStoreInConfig;
